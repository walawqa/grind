<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>WALAWKA GRIND</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar__left">
      <div class="app-title">WALAWKA GRIND</div>
      <div class="app-subtitle" id="subtitle">Lokalnie • bez konta</div>
    </div>
    <div class="topbar__right">
      
      <button class="icon-btn" id="btnSettings" aria-label="Ustawienia wyglądu">⚙</button>
    
    </div>
  </header>

  <main class="layout">
    
    <section class="panel">
      <div class="panel__header">
        <h2>Data</h2>
        <div class="date-row">
          <button class="icon-btn" id="btnPrevDay" aria-label="Poprzedni dzień">◀</button>
          <input type="date" id="datePicker" />
          <button class="icon-btn" id="btnNextDay" aria-label="Następny dzień">▶</button>
          <button class="btn btn--ghost" id="btnToday">Dzisiaj</button>
        </div>
      </div>
    </section>
<section class="panel">
  <div class="panel__header">
    <h2>Widok</h2>
    <div class="filters">
      <button class="chip chip--active" data-view="today" id="tabToday">Dzisiaj</button>
      <button class="chip" data-view="goals" id="tabGoals">Cele</button>
      <button class="chip" data-view="tasks" id="tabTasks">Taski</button>
      <button class="chip" data-view="calendar" id="tabCalendar">Kalendarz</button>
      <button class="chip" data-view="gym" id="tabGym">Siłownia</button>
      <button class="chip" data-view="diet" id="tabDiet">Dieta</button>
    </div>
  </div>

  <!-- Widok: DZISIAJ -->
  <div id="todayView">
    <div class="today-hint">Szybkie odhaczanie celów Daily dla wybranej daty.</div>
    <div id="todayDailyList" class="today-list"></div>
  

    <div class="overview-title">Postęp celów (rok)</div>
    <div id="overviewGrid" class="overview-grid"></div>

    </div>

  <!-- Widok: CELE -->
<div id="goalsView" style="display:none;">
  <div class="panel__header" style="margin-top:10px;">
    <h2>Twoje cele</h2>
    <div class="filters">
      <button class="chip chip--active" data-filter="all" type="button">Wszystkie</button>
      <button class="chip" data-filter="daily" type="button">Daily</button>
      <button class="chip" data-filter="task" type="button">Task</button>
    </div>
  </div>

  <div id="goalsList" class="goals"></div>
</div>


  <!-- Widok: TASKI (checklista) -->
  <div id="tasksView" style="display:none;">
    <div class="today-hint">Taski jako checklisty (bez dat).</div>
    <div id="tasksList" class="goals"></div>
  </div>


  <!-- Widok: KALENDARZ -->
  <div id="calendarView" style="display:none;">
    <div class="calendar-header">
      <button class="icon-btn" id="calPrev" aria-label="Poprzedni miesiąc">◀</button>
      <div class="calendar-title" id="calTitle">Miesiąc</div>
      <button class="icon-btn" id="calNext" aria-label="Następny miesiąc">▶</button>
      <button class="btn btn--ghost" id="calThis">Bieżący</button>
    </div>

    <div class="calendar-weekdays">
      <div>Pn</div><div>Wt</div><div>Śr</div><div>Cz</div><div>Pt</div><div>So</div><div>Nd</div>
    </div>
    <div id="calendarGrid" class="calendar-grid"></div>

    <div class="calendar-legend">
      <div class="calendar-hint">Kliknij dzień, aby przejść do tej daty (Dzisiaj).</div>
      <div id="calendarDayDetails" class="calendar-details"></div>
    </div>
  </div>



  <!-- Widok: SIŁOWNIA -->
  <div id="gymView" style="display:none;">
    <div class="gym-header">
      <button class="icon-btn" id="gymPrevWeek" aria-label="Poprzedni tydzień">◀</button>
      <div class="gym-title" id="gymWeekTitle">Tydzień</div>

    <div class="gym-workouts">
      <button class="chip chip--active" id="gymWorkoutA" data-workout="A" type="button">Trening A</button>
      <button class="chip" id="gymWorkoutB" data-workout="B" type="button">Trening B</button>
      <button class="chip" id="gymWorkoutC" data-workout="C" type="button">Trening C</button>
    </div>
      <button class="icon-btn" id="gymNextWeek" aria-label="Następny tydzień">▶</button>
      <button class="btn btn--ghost" id="gymThisWeek">Ten tydzień</button>
    </div>

    <div class="today-hint">Wpisuj tygodniowo: serie i ciężar. Dane zapisują się lokalnie na tym urządzeniu.</div>
    <div id="gymList" class="gym-list"></div>
  </div>


  <!-- Widok: DIETA -->
  <div id="dietView" style="display:none;">
    <div class="diet-header">
      <button class="icon-btn" id="dietPrevWeek" aria-label="Poprzedni tydzień">◀</button>
      <div class="diet-title" id="dietWeekTitle">Tydzień</div>
      <button class="icon-btn" id="dietNextWeek" aria-label="Następny tydzień">▶</button>
      <button class="btn btn--ghost" id="dietThisWeek">Ten tydzień</button>
    </div>

    <div class="today-hint">Ustaw cele dzienne i wpisuj spożycie dla wybranej daty. Podsumowanie tygodniowe liczy się automatycznie.</div>


    <!-- 1) SPOŻYCIE (na górze) -->
    <div class="diet-card">
      <div class="diet-card__title">Spożycie — <span id="dietDateLabel">dzień</span></div>
      <div class="diet-form">
        <div class="diet-field">
          <label>Kcal</label>
          <input type="number" inputmode="numeric" min="0" step="1" id="dietInKcal" />
        </div>
        <div class="diet-field">
          <label>Białko (g)</label>
          <input type="number" inputmode="numeric" min="0" step="1" id="dietInP" />
        </div>
        <div class="diet-field">
          <label>Węgle (g)</label>
          <input type="number" inputmode="numeric" min="0" step="1" id="dietInC" />
        </div>
        <div class="diet-field">
          <label>Tłuszcze (g)</label>
          <input type="number" inputmode="numeric" min="0" step="1" id="dietInF" />
        </div>
      </div>
      <div class="diet-mini" id="dietMiniStatus"></div>
    </div>

    <!-- 2) PODSUMOWANIE TYGODNIOWE -->
    <div class="diet-card" style="margin-top:12px;">
      <div class="diet-card__title">Podsumowanie tygodniowe</div>
      <div id="dietWeekSummary" class="diet-summary"></div>
      <div class="diet-note">Zasady liczenia: kcal/węgle/tłuszcze = „w normie”, jeśli ≤ celu. Białko = „w normie”, jeśli ≥ celu.</div>
    </div>

    <!-- 3) CELE DZIENNE (na dole) -->
    <div class="diet-card" style="margin-top:12px;">
      <div class="diet-card__title">Cele dzienne</div>
      <div class="diet-form diet-form--targets">
        <div class="diet-field">
          <label>Kcal</label>
          <input type="number" inputmode="numeric" min="0" step="1" id="dietTargetKcal" />
        </div>
        <div class="diet-field">
          <label>Białko (g)</label>
          <input type="number" inputmode="numeric" min="0" step="1" id="dietTargetP" />
        </div>
        <div class="diet-field">
          <label>Węgle (g)</label>
          <input type="number" inputmode="numeric" min="0" step="1" id="dietTargetC" />
        </div>
        <div class="diet-field">
          <label>Tłuszcze (g)</label>
          <input type="number" inputmode="numeric" min="0" step="1" id="dietTargetF" />
        </div>
      </div>
    </div>
  </div>

</section>

    
  </main>
  <!-- Floating Add button (safe-area aware) -->
  <button class="fab" id="btnAdd" type="button" aria-label="Dodaj">
    <span class="fab__icon">＋</span>
    <span class="fab__label" id="btnAddLabel">Dodaj</span>
  </button>


  <!-- Modal: Add/Edit Goal -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal__backdrop" id="modalBackdrop"></div>
    <div class="modal__card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal__header">
        <h3 id="modalTitle">Dodaj cel</h3>
        <button class="icon-btn" id="btnCloseModal" aria-label="Zamknij">✕</button>
      </div>

      <form id="goalForm" class="form">
        <div class="form-row">
          <label>Nazwa</label>
          <input type="text" id="goalName" maxlength="60" placeholder="np. Siłownia / Dieta / Nauka" required />
        </div>

        <div class="form-row">
          <label>Typ</label>
          <select id="goalType">
            <option value="daily">Daily (odznaczane w kalendarzu)</option>
            <option value="task">Task (checklista)</option>
          </select>
        </div>

        <div class="form-row">
          <label style="display:flex;align-items:center;gap:10px;">
            <input type="checkbox" id="showInOverview" checked />
            <span>Pokazuj postęp na stronie głównej</span>
          </label>
          <small class="hint">Wyłącz, jeśli nie chcesz widzieć kafelka postępu dla tego celu.</small>
        </div>

        <div class="form-row" id="dailyFields">
          <label>Cel roczny dla Daily (liczba dni / razy)</label>
          <input type="number" id="dailyTarget" min="1" step="1" value="150" />
          <small class="hint">
            Przykład: 150. Każde odhaczenie dnia = +1. Procent liczy się automatycznie.
          </small>
        </div>

        <div class="form-row" id="taskFields">
          <label>Podzadania (1 linia = 1 punkt)</label>
          <textarea id="taskItems" rows="6" placeholder="np.&#10;Zebrać źródła&#10;Napisać rozdział 1"></textarea>
          <small class="hint">Taski nie mają dat — to checklista.</small>
        </div>
<div class="form-row">
          <label>Kolor</label>
          <input type="color" id="goalColor" value="#3b82f6" />
        </div>

        <div class="form-row">
          <label>Opis (opcjonalnie)</label>
          <textarea id="goalNote" rows="3" maxlength="240" placeholder="Krótka notatka / zasady celu"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn--ghost" id="btnCancel">Anuluj</button>
          <button type="submit" class="btn" id="btnSave">Zapisz</button>
        </div>

        <input type="hidden" id="editingId" />
      </form>
    </div>
  </div>


  <!-- Modal: Add/Edit Exercise (Gym) -->
  <div class="modal" id="gymModal" aria-hidden="true">
    <div class="modal__backdrop" id="gymModalBackdrop"></div>
    <div class="modal__card" role="dialog" aria-modal="true" aria-labelledby="gymModalTitle">
      <div class="modal__header">
        <h3 id="gymModalTitle">Dodaj ćwiczenie</h3>
        <button class="icon-btn" id="btnCloseGymModal" aria-label="Zamknij">✕</button>
      </div>

      <form id="gymForm" class="form">
        <div class="form-row">
          <label>Nazwa ćwiczenia</label>
          <input type="text" id="exName" maxlength="60" placeholder="np. Wyciskanie leżąc" required />
        </div>

        <div class="form-row">
          <label>Plan (serie × powtórzenia)</label>
          <input type="text" id="exScheme" maxlength="30" placeholder="np. 4×8" />
          <small class="hint">To jest opis/szablon. W tygodniu wpisujesz realne serie i ciężar.</small>
        </div>

        <div class="form-row">
          <label>Trening</label>
          <select id="exWorkout">
            <option value="A">Trening A</option>
            <option value="B">Trening B</option>
            <option value="C">Trening C</option>
          </select>
          <small class="hint">Ćwiczenie będzie widoczne tylko w wybranym treningu.</small>
        </div>

        <div class="form-row">
          <label>Notatka (opcjonalnie)</label>
          <textarea id="exNote" rows="3" maxlength="240" placeholder="np. przerwy 2–3 min, tempo 3-1-1"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn--ghost" id="btnCancelGym">Anuluj</button>
          <button type="submit" class="btn" id="btnSaveGym">Zapisz</button>
        </div>

        <input type="hidden" id="editingExId" />
      </form>
    </div>
  </div>


  <!-- Modal: Gym Progress History -->
  <div class="modal" id="gymHistoryModal" aria-hidden="true">
    <div class="modal__backdrop" id="gymHistoryBackdrop"></div>
    <div class="modal__card" role="dialog" aria-modal="true" aria-labelledby="gymHistoryTitle">
      <div class="modal__header">
        <h3 id="gymHistoryTitle">Historia progresu</h3>
        <button class="icon-btn" id="btnCloseGymHistory" aria-label="Zamknij">✕</button>
      </div>

      <div class="gym-history">
        <div class="gym-history__meta" id="gymHistoryMeta"></div>

        <div class="gym-history__chart" id="gymHistoryChart"></div>

        <div class="gym-history__table-wrap">
          <table class="gym-history__table">
            <thead>
              <tr>
                <th>Tydzień</th>
                <th>Serie</th>
                <th>Powt.</th>
                <th>Ciężar (kg)</th>
              </tr>
            </thead>
            <tbody id="gymHistoryRows"></tbody>
          </table>
        </div>

        <div class="gym-history__hint">Tip: kliknij w ćwiczenie, aby zobaczyć historię.</div>
      </div>
    </div>
  </div>

  <!-- Modal: Settings (Appearance) -->
  <div class="modal" id="settingsModal" aria-hidden="true">
    <div class="modal__backdrop" id="settingsBackdrop"></div>
    <div class="modal__card" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
      <div class="modal__header">
        <h3 id="settingsTitle">Ustawienia wyglądu</h3>
        <button class="icon-btn" id="btnCloseSettings" aria-label="Zamknij">✕</button>
      </div>

      <div class="form">
        <div class="form-row">
          <label>Kolorystyka tła</label>
          <div class="preset-row" id="gradientPresets">
            <button type="button" class="preset-btn" data-preset="blue">
              <span class="preset-dots">
                <span class="preset-dot" style="background: rgb(37,99,235)"></span>
                <span class="preset-dot" style="background: rgb(16,185,129)"></span>
                <span class="preset-dot" style="background: rgb(99,102,241)"></span>
              </span>
              Blue
            </button>

            <button type="button" class="preset-btn" data-preset="purple">
              <span class="preset-dots">
                <span class="preset-dot" style="background: rgb(168,85,247)"></span>
                <span class="preset-dot" style="background: rgb(99,102,241)"></span>
                <span class="preset-dot" style="background: rgb(236,72,153)"></span>
              </span>
              Purple
            </button>

            <button type="button" class="preset-btn" data-preset="green">
              <span class="preset-dots">
                <span class="preset-dot" style="background: rgb(34,197,94)"></span>
                <span class="preset-dot" style="background: rgb(16,185,129)"></span>
                <span class="preset-dot" style="background: rgb(59,130,246)"></span>
              </span>
              Green
            </button>

            <button type="button" class="preset-btn" data-preset="red">
              <span class="preset-dots">
                <span class="preset-dot" style="background: rgb(239,68,68)"></span>
                <span class="preset-dot" style="background: rgb(245,158,11)"></span>
                <span class="preset-dot" style="background: rgb(59,130,246)"></span>
              </span>
              Red
            </button>

            <button type="button" class="preset-btn" data-preset="mono">
              <span class="preset-dots">
                <span class="preset-dot" style="background: rgb(148,163,184)"></span>
                <span class="preset-dot" style="background: rgb(100,116,139)"></span>
                <span class="preset-dot" style="background: rgb(71,85,105)"></span>
              </span>
              Mono
            </button>
          </div>
          <small class="hint">Ustawienie zapisuje się lokalnie (na tym urządzeniu).</small>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn--ghost" id="btnResetGradient">Reset</button>
          <button type="button" class="btn" id="btnCloseSettings2">OK</button>
        </div>
      </div>
    </div>
  </div>


  

  <!-- Modal: UI (alerts / confirm) -->
  <div class="modal" id="uiModal" aria-hidden="true">
    <div class="modal__backdrop" id="uiBackdrop"></div>
    <div class="modal__card" role="dialog" aria-modal="true" aria-labelledby="uiTitle">
      <div class="modal__header">
        <h3 id="uiTitle">Powiadomienie</h3>
        <button class="icon-btn" id="uiClose" aria-label="Zamknij">✕</button>
      </div>
      <div class="ui-modal__message" id="uiMessage"></div>
      <div class="form-actions" style="margin-top:12px;">
        <button type="button" class="btn btn--ghost" id="uiCancel">Anuluj</button>
        <button type="button" class="btn" id="uiOk">OK</button>
      </div>
    </div>
  </div>



  <script src="app.js"></script>

</body>
</html>